<div class="tab scrollable{{#if tab.active}} active{{/if}}" data-group="sheet" data-tab="worldExplorer">

    {{!-- Enable --}}
    <div class="form-group">
        <label for="WorldExplorer-Enabled-{{document.id}}">{{localize "WorldExplorer.SceneSettings.Enabled"}}</label>
        <input id="WorldExplorer-Enabled-{{document.id}}" type="checkbox" name="flags.world-explorer.enabled" {{checked enabled}}/>
    </div>

    {{!-- Overlay Settings --}}
    <fieldset class="world-explorer-setting">
        <legend><i class="fa-solid fa-grid-2-plus"></i> {{localize "WorldExplorer.SceneSettings.Overlay.Title"}}</legend>
        {{!-- Image --}}
        <div class="form-group">
            <label>{{localize "WorldExplorer.FIELDS.image.Name"}}</label>
            <div class="form-fields">
                <file-picker name="flags.world-explorer.image" type="imagevideo" value="{{image}}"></file-picker>
            </div>
        </div>
        {{!-- Color --}}
        <div class="form-group">
            <label>{{localize "WorldExplorer.FIELDS.color.Name"}}</label>
            <div class="form-fields">
                <color-picker name="flags.world-explorer.color" value="{{color}}" placeholder="{{localize "WorldExplorer.FIELDS.color.Placeholder"}}"></color-picker>
            </div>
            <p class="hint">{{localize "WorldExplorer.FIELDS.color.Hint"}}</p>
        </div>
        {{!-- GM Opacity --}}
        <div class="form-group">
            <label>{{localize "WorldExplorer.FIELDS.opacityGM.Name" role=roles.gm}}</label>
            <div class="form-fields">
                <range-picker name="flags.world-explorer.opacityGM" value="{{opacityGM}}" min="0" max="1" step="0.05"></range-picker>
            </div>
        </div>
        {{!-- Player Opacity --}}
        <div class="form-group">
            <label>{{localize "WorldExplorer.FIELDS.opacityPlayer.Name" role=roles.player}}</label>
            <div class="form-fields">
                <range-picker name="flags.world-explorer.opacityPlayer" value="{{opacityPlayer}}" min="0" max="1" step="0.05"></range-picker>
            </div>
        </div>
    </fieldset>

    {{!-- Partial Settings --}}
    <fieldset>
        <legend><i class="fa-duotone fa-grid-2-plus"></i> {{localize "WorldExplorer.SceneSettings.Partial.Title"}}</legend>
        {{!-- Partial Color --}}
        <div class="form-group">
            <label>{{localize "WorldExplorer.FIELDS.partialColor.Name"}}</label>
            <div class="form-fields">
                <color-picker name="flags.world-explorer.partialColor" value="{{partialColor}}" placeholder="{{localize "WorldExplorer.FIELDS.partialColor.Placeholder"}}"></color-picker>
            </div>
            <p class="hint">{{{localize "WorldExplorer.FIELDS.partialColor.Hint"}}}</p>
        </div>
        {{!-- Partial Opacity --}}
        <div class="form-group">
            <label>{{localize "WorldExplorer.FIELDS.partialOpacityPlayer.Name"}}</label>
            <div class="form-fields">
                <range-picker name="flags.world-explorer.partialOpacityPlayer" value="{{partialOpacityPlayer}}" min="0" max="1" step="0.05"></range-picker>
            </div>
            {{!-- Display calculated GM Partial Opacity --}}
            <div class="form-fields world-explorer-derived">
                <label>{{localize "WorldExplorer.SceneSettings.Partial.DerivedName"}}</label>
                <input name="WorldExplorerPartialOpacityGM" type="number" min="0" max="1" step="any" value="{{partialOpacityGM}}" disabled>
            </div>
            <p class="hint">{{localize "WorldExplorer.FIELDS.partialOpacityPlayer.Hint"}}</p>
        </div>
    </fieldset>

    {{!-- Token Interactions --}}
    <fieldset>
        <legend><i class="fa-solid fa-circle-user"></i> {{localize "WorldExplorer.SceneSettings.TokenInteractions.Title"}}</legend>
        <div class="form-group">
            <label for="WorldExplorer-persistExploredAreas">{{localize "WorldExplorer.FIELDS.persistExploredAreas.Name"}}</label>
            <input id="WorldExplorer-persistExploredAreas" type="checkbox" name="flags.world-explorer.persistExploredAreas" {{checked persistExploredAreas}}/>
        </div>
        <div class="form-group slim">
            <label>{{localize "WorldExplorer.FIELDS.revealRadius.Name"}} <span class="units">({{units}})</span></label>
            <div class="form-fields">
                <input type="number" name="flags.world-explorer.revealRadius" value="{{revealRadius}}">
            </div>
            <p class="hint">{{localize "WorldExplorer.FIELDS.revealRadius.Hint"}}</p>
        </div>
        <div class="form-group slim">
            <label>{{localize "WorldExplorer.FIELDS.gridRevealRadius.Name"}} <span class="units">({{units}})</span></label>
            <div class="form-fields">
                <input type="number" name="flags.world-explorer.gridRevealRadius" value="{{gridRevealRadius}}">
            </div>
            <p class="hint">{{localize "WorldExplorer.FIELDS.gridRevealRadius.Hint"}}</p>
        </div>
    </fieldset>
</div>